!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common/http"),require("rxjs")):"function"==typeof define&&define.amd?define("signalk-client-angular",["exports","@angular/core","@angular/common/http","rxjs"],e):e((t=t||self)["signalk-client-angular"]={},t.ng.core,t.ng.common.http,t.rxjs)}(this,(function(t,e,n,i){"use strict";var o=function(){function t(){this.limitUI04=this.maxFromBits(4),this.limitUI06=this.maxFromBits(6),this.limitUI08=this.maxFromBits(8),this.limitUI12=this.maxFromBits(12),this.limitUI14=this.maxFromBits(14),this.limitUI16=this.maxFromBits(16),this.limitUI32=this.maxFromBits(32),this.limitUI40=this.maxFromBits(40),this.limitUI48=this.maxFromBits(48),this.create()}return t.prototype.toString=function(){return this.hex},t.prototype.toURN=function(){return"urn:uuid:"+this.hex},t.prototype.toSignalK=function(){return"urn:mrn:signalk:uuid:"+this.hex},t.prototype.toBytes=function(){for(var t=this.hex.split("-"),e=[],n=0,i=0;i<t.length;i++)for(var o=0;o<t[i].length;o+=2)e[n++]=parseInt(t[i].substr(o,2),16);return e},t.prototype.maxFromBits=function(t){return Math.pow(2,t)},t.prototype.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t.prototype.randomUI04=function(){return this.getRandomInt(0,this.limitUI04-1)},t.prototype.randomUI06=function(){return this.getRandomInt(0,this.limitUI06-1)},t.prototype.randomUI08=function(){return this.getRandomInt(0,this.limitUI08-1)},t.prototype.randomUI12=function(){return this.getRandomInt(0,this.limitUI12-1)},t.prototype.randomUI14=function(){return this.getRandomInt(0,this.limitUI14-1)},t.prototype.randomUI16=function(){return this.getRandomInt(0,this.limitUI16-1)},t.prototype.randomUI32=function(){return this.getRandomInt(0,this.limitUI32-1)},t.prototype.randomUI40=function(){return(0|Math.random()*(1<<30))+(0|1024*Math.random())*(1<<30)},t.prototype.randomUI48=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},t.prototype.create=function(){this.fromParts(this.randomUI32(),this.randomUI16(),16384|this.randomUI12(),128|this.randomUI06(),this.randomUI08(),this.randomUI48())},t.prototype.paddedString=function(t,e,n){void 0===n&&(n=null),n=n||"0";for(var i=e-(t=String(t)).length;i>0;i>>>=1,n+=n)1&i&&(t=n+t);return t},t.prototype.fromParts=function(t,e,n,i,o,s){return this.version=n>>12&15,this.hex=this.paddedString(t.toString(16),8)+"-"+this.paddedString(e.toString(16),4)+"-"+this.paddedString(n.toString(16),4)+"-"+this.paddedString(i.toString(16),2)+this.paddedString(o.toString(16),2)+"-"+this.paddedString(s.toString(16),12),this},t}();var s=function(){function t(){}return t.dotToSlash=function(t){var e=t.split("?");return-1!=e[0].indexOf(".")&&(e[0]=e[0].split(".").join("/")),e.join("?")},t.contextToPath=function(t){return("self"==t?"vessels.self":t).split(".").join("/")},t}(),r=function(){function t(){}return t.updates=function(){return{context:null,updates:[]}},t.subscribe=function(){return{context:null,subscribe:[]}},t.unsubscribe=function(){return{context:null,unsubscribe:[]}},t.request=function(){return{requestId:(new o).toString()}},t}(),a=function(){function t(t,e,n,i){this._method=[],this._message="",this._message=void 0!==t?t:"",this._state=void 0!==e?e:p.alarm,n&&this._method.push(h.visual),i&&this._method.push(h.sound)}return Object.defineProperty(t.prototype,"value",{get:function(){return{message:this._message,state:this._state,method:this._method}},enumerable:!0,configurable:!0}),t}();var p={normal:"normal",alert:"alert",warn:"warn",alarm:"alarm",emergency:"emergency"},h={visual:"visual",sound:"sound"},u=function(){function t(t){this.http=t}return Object.defineProperty(t.prototype,"authToken",{set:function(t){this._token=t},enumerable:!0,configurable:!0}),t.prototype.getSelf=function(){return this.get("vessels/self")},t.prototype.getSelfId=function(){return this.get("self")},t.prototype.getMeta=function(t,e){return this.get(s.contextToPath(t)+"/"+s.dotToSlash(e)+"/meta")},t.prototype.get=function(t){if(this.endpoint){"/"==t[0]&&(t=t.slice(1));var e=this.endpoint+s.dotToSlash(t);if(this._token){var i=new n.HttpHeaders({Authorization:"JWT "+this._token});return this.http.get(e,{headers:i})}return this.http.get(e)}},t.prototype.put=function(t,e,i,o){if(this.endpoint){var r,a,p={value:{}};if(void 0===i&&void 0===o)"/"==t[0]&&(t=t.slice(1)),a=s.dotToSlash(t),r="",p.value=e;else if(void 0===o)r=t?s.contextToPath(t):"",a=s.dotToSlash(e),p.value=i;else{r=t?s.contextToPath(t):"";var h=s.dotToSlash(e).split("/");h.push(i),a=h.join("/"),p.value=o}"/"==a[0]&&(a=a.slice(1));var u=a.split("/");if("resources"==u[0]&&(r="",this.server&&"signalk-server-node"==this.server.id)){var l=JSON.parse(JSON.stringify(p.value));p.value={},p.value[u[u.length-1]]=l,a="vessels/self/"+u.slice(0,u.length-1).join("/")}r=r?r+"/":"";var c=this.endpoint+r+s.dotToSlash(a);if(this._token){var d=new n.HttpHeaders({Authorization:"JWT "+this._token});return this.http.put(c,p,{headers:d})}return this.http.put(c,p)}},t.prototype.post=function(t,e){if(this.endpoint){"/"==t[0]&&(t=t.slice(1));var i=""+this.endpoint+s.dotToSlash(t);if(this._token){var o=new n.HttpHeaders({Authorization:"JWT "+this._token});return this.http.post(i,e,{headers:o})}return this.http.post(i,e)}},t.prototype.delete=function(t){if(this.endpoint){"/"==t[0]&&(t=t.slice(1));var e=""+this.endpoint+s.dotToSlash(t);if(this._token){var i=new n.HttpHeaders({Authorization:"JWT "+this._token});return this.http.delete(e,{headers:i})}return this.http.delete(e)}},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:n.HttpClient}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(n.HttpClient))},token:t,providedIn:"root"}),t}();var l=function(){function t(){this._filter=null,this._wsTimeout=2e4,this._playbackMode=!1,this._source=null,this._connect=new i.Subject,this.onConnect=this._connect.asObservable(),this._close=new i.Subject,this.onClose=this._close.asObservable(),this._error=new i.Subject,this.onError=this._error.asObservable(),this._message=new i.Subject,this.onMessage=this._message.asObservable()}return Object.defineProperty(t.prototype,"source",{set:function(t){this._source||(this._source={}),this._source.label=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authToken",{set:function(t){this._token=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"connectionTimeout",{get:function(){return this._wsTimeout},set:function(t){this._wsTimeout=t<3e3?3e3:t>6e4?6e4:t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return!(!this.ws||1==this.ws.readyState||3==this.ws.readyState)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filter",{get:function(){return this._filter},set:function(t){t&&-1!=t.indexOf("self")?this._filter=this.selfId?this.selfId:null:this._filter=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"playbackMode",{get:function(){return this._playbackMode},enumerable:!0,configurable:!0}),t.prototype.close=function(){this.ws&&(this.ws.close(),this.ws=null)},t.prototype.open=function(t,e,n){var i=this;if(t=t||this.endpoint){var o=-1==t.indexOf("?")?"?":"&";e&&(t+=o+"subscribe="+e),(this._token||n)&&(t+=(e?"&":"?")+"token="+(this._token||n)),this.close(),this.ws=new WebSocket(t),setTimeout((function(){i.ws&&1!=i.ws.readyState&&3!=i.ws.readyState&&(console.warn("Connection watchdog expired ("+i._wsTimeout/1e3+" sec): "+i.ws.readyState+"... aborting connection..."),i.close())}),this._wsTimeout),this.ws.onopen=function(t){i._connect.next(t)},this.ws.onclose=function(t){i._close.next(t)},this.ws.onerror=function(t){i._error.next(t)},this.ws.onmessage=function(t){i.parseOnMessage(t)}}},t.prototype.parseOnMessage=function(t){var e;if("string"==typeof t.data)try{e=JSON.parse(t.data)}catch(t){return}this.isHello(e)?(this.selfId=e.self,this._playbackMode=void 0!==e.startTime,this._message.next(e)):this.isResponse(e)?(void 0!==e.login&&void 0!==e.login.token&&(this._token=e.login.token),this._message.next(e)):this._filter&&this.isDelta(e)?e.context==this._filter&&this._message.next(e):this._message.next(e)},t.prototype.sendRequest=function(t){if("object"!=typeof t)return null;var e=r.request();return void 0===t.login&&this._token&&(e.token=this._token),Object.keys(t).forEach((function(n){e[n]=t[n]})),this.send(e),e.requestId},t.prototype.put=function(t,e,n){var i={context:"self"==t?"vessels.self":t,put:{path:e,value:n}};return this.sendRequest(i)},t.prototype.login=function(t,e){var n={login:{username:t,password:e}};return this.sendRequest(n)},t.prototype.send=function(t){this.ws&&("object"==typeof t&&(t=JSON.stringify(t)),this.ws.send(t))},t.prototype.sendUpdate=function(t,e,n){void 0===t&&(t="self");var i=r.updates();this._token&&(i.token=this._token),i.context="self"==t?"vessels.self":t,this._token&&(i.token=this._token);var o=[];"string"==typeof e&&o.push({path:e,value:n}),"object"==typeof e&&Array.isArray(e)&&(o=e);var s={timestamp:(new Date).toISOString(),values:o};this._source&&(s.source=this._source),i.updates.push(s),this.send(i)},t.prototype.subscribe=function(t,e,n){void 0===t&&(t="*"),void 0===e&&(e="*");var i=r.subscribe();if(this._token&&(i.token=this._token),i.context="self"==t?"vessels.self":t,this._token&&(i.token=this._token),"object"==typeof e&&Array.isArray(e)&&(i.subscribe=e),"string"==typeof e){var o={};o.path=e,n&&"object"==typeof n&&(n.period&&(o.period=n.period),n.minPeriod&&(o.minPeriod=n.period),!n.format||"delta"!=n.format&&"full"!=n.format||(o.format=n.format),!n.policy||"instant"!=n.policy&&"ideal"!=n.policy&&"fixed"!=n.policy||(o.policy=n.policy)),i.subscribe.push(o)}this.send(i)},t.prototype.unsubscribe=function(t,e){void 0===t&&(t="*"),void 0===e&&(e="*");var n=r.unsubscribe();this._token&&(n.token=this._token),n.context="self"==t?"vessels.self":t,this._token&&(n.token=this._token),"object"==typeof e&&Array.isArray(e)&&(n.unsubscribe=e),"string"==typeof e&&n.unsubscribe.push({path:e}),this.send(n)},t.prototype.raiseAlarm=function(t,e,n){var i;void 0===t&&(t="*"),i="string"==typeof e&&-1==e.indexOf("notifications.")?"notifications."+e:e,this.sendUpdate(t,i,n.value)},t.prototype.clearAlarm=function(t,e){void 0===t&&(t="*");var n=-1==e.indexOf("notifications.")?"notifications."+e:e;this.sendUpdate(t,n,null)},t.prototype.isSelf=function(t){return t.context==this.selfId},t.prototype.isDelta=function(t){return void 0!==t.context},t.prototype.isHello=function(t){return void 0!==t.version&&void 0!==t.self},t.prototype.isResponse=function(t){return void 0!==t.requestId},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}();var c=function(){function t(t){this.http=t}return t.prototype.ngOnDestroy=function(){},t.prototype.list=function(){var t=-1==this.endpoint.indexOf("webapps")?this.endpoint+"list":this.endpoint;return this.http.get(t)},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:n.HttpClient}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(n.HttpClient))},token:t,providedIn:"root"}),t}();var d={USER:"user",GLOBAL:"global"},f=function(){function t(t,e,n,i){this.http=t,this.apps=e,this.api=n,this.stream=i,this._version="v1",this.fallbackEndpoints={endpoints:{v1:{}},server:{id:"fallback"}},this.server={endpoints:{},info:{},apiVersions:[]},this.fallback=!1,this.init()}return t.prototype.debug=function(t){e.isDevMode()&&console.log(t)},Object.defineProperty(t.prototype,"version",{get:function(){return parseInt(this._version.slice(1))},set:function(t){var e="v"+t;0==this.server.apiVersions.length?(this._version=e,this.debug("Signal K api version set to: "+e)):(this._version=-1!=this.server.apiVersions.indexOf(e)?e:this._version,this.debug("Signal K api version set request: "+e+", result: "+this._version))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authToken",{set:function(t){this._token=t,this.api.authToken=t,this.stream.authToken=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"uuid",{get:function(){return new o},enumerable:!0,configurable:!0}),t.prototype.ngOnDestroy=function(){this.stream.close()},t.prototype.init=function(t,e,n){void 0===t&&(t="localhost"),void 0===e&&(e=null),void 0===n&&(n=!1),this.hostname=t,n?(this.protocol="https",this.port=e||443):(this.protocol="http",this.port=e||80);var i=this.protocol+"://"+this.hostname+":"+this.port;this.fallbackEndpoints.endpoints.v1["signalk-http"]=i+"/signalk/v1/api/",this.fallbackEndpoints.endpoints.v1["signalk-ws"]=i+"/signalk/v1/stream"},t.prototype.hello=function(t,e,n){return void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=!1),this.init(t,e,n),this.get("/signalk")},t.prototype.connectAsPromise=function(t,e,n){var i=this;return void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=!1),new Promise((function(o,s){i.debug("Contacting Signal K server........."),i.hello(t,e,n).subscribe((function(t){i.getLoginStatus().subscribe((function(t){})),i.stream&&i.stream.close(),i.processHello(t),i.api.endpoint=i.resolveHttpEndpoint(),i.stream.endpoint=i.resolveStreamEndpoint(),o(!0)}),(function(t){i.fallback?(i.stream&&i.stream.close(),i.processHello(null),i.api.endpoint=i.resolveHttpEndpoint(),i.stream.endpoint=i.resolveStreamEndpoint(),o(!0)):(i.disconnectedFromServer(),s(t))}))}))},t.prototype.connect=function(t,e,n){var o=this;void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=!1);var s=new i.Subject;return this.debug("Contacting Signal K server........."),this.hello(t,e,n).subscribe((function(t){o.getLoginStatus().subscribe((function(t){})),o.stream&&o.stream.close(),o.processHello(t),o.api.endpoint=o.resolveHttpEndpoint(),o.stream.endpoint=o.resolveStreamEndpoint(),s.next(!0)}),(function(t){o.fallback?(o.stream&&o.stream.close(),o.processHello(null),o.api.endpoint=o.resolveHttpEndpoint(),o.stream.endpoint=o.resolveStreamEndpoint(),s.next(!0)):(o.disconnectedFromServer(),s.error(t))})),s.asObservable()},t.prototype.disconnect=function(){this.stream.close()},t.prototype.connectStreamAsPromise=function(t,e,n,i){var o=this;return void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=!1),void 0===i&&(i=null),new Promise((function(s,r){o.connectAsPromise(t,e,n).then((function(){var t=o.resolveStreamEndpoint();t?(o.stream.open(t,i),s(!0)):r(new Error("Server has no advertised Stream endpoints!"))})).catch((function(t){r(t)}))}))},t.prototype.connectStream=function(t,e,n,o){var s=this;void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=!1),void 0===o&&(o=null);var r=new i.Subject;return this.connect(t,e,n).subscribe((function(){var t=s.resolveStreamEndpoint();t?(s.stream.open(t,o),r.next(!0)):r.error(new Error("Server has no advertised Stream endpoints!"))}),(function(t){r.error(t)})),r.asObservable()},t.prototype.connectPlaybackAsPromise=function(t,e,n,i){var o=this;return void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=!1),new Promise((function(s,r){o.connectAsPromise(t,e,n).then((function(){o.openPlayback(null,i,o._token),s(!0)})).catch((function(t){r(t)}))}))},t.prototype.connectPlayback=function(t,e,n,o){var s=this;void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=!1);var r=new i.Subject;return this.connect(t,e,n).subscribe((function(){s.openPlayback(null,o,s._token),r.next(!0)}),(function(t){r.error(t)})),r.asObservable()},t.prototype.openStream=function(t,e,n){return void 0===t&&(t=null),this.debug("openStream........."),t||(t=this.resolveStreamEndpoint())?(this.stream.open(t,e,n),!0):new Error("Server has no advertised Stream endpoints!")},t.prototype.openPlayback=function(t,e,n){if(void 0===t&&(t=null),this.debug("openPlayback........."),!t){if(!(t=this.resolveStreamEndpoint()))return new Error("Server has no advertised Stream endpoints!");t=t.replace("stream","playback")}var i,o="";return e&&"object"==typeof e&&(o+=e.startTime?"?startTime="+e.startTime.slice(0,e.startTime.indexOf("."))+"Z":"",o+=e.playbackRate?"&playbackRate="+e.playbackRate:"",i=e.subscribe?e.subscribe:null),this.stream.open(t+o,i,n),!0},t.prototype.processHello=function(t){this.server.endpoints=t&&t.endpoints?t.endpoints:this.fallbackEndpoints.endpoints,this.server.info=t&&t.server?t.server:this.fallbackEndpoints.server,this.server.apiVersions=this.server.endpoints?Object.keys(this.server.endpoints):[],this.debug(this.server.endpoints),this.api.server=this.server.info,this.apps.endpoint=this.resolveAppsEndpoint()},t.prototype.resolveAppsEndpoint=function(){var t=this.resolveHttpEndpoint().replace("api","apps");this.server&&"signalk-server-node"==this.server.info.id&&(this.server.info.version.split(".")[1]<26&&(t=this.protocol+"://"+this.hostname+":"+this.port+"/webapps"));return t},t.prototype.resolveStreamEndpoint=function(){return this.server.endpoints[this._version]&&this.server.endpoints[this._version]["signalk-ws"]?(this.debug("Connecting endpoint version: "+this._version),""+this.server.endpoints[this._version]["signalk-ws"]):this.server.endpoints.v1&&this.server.endpoints.v1["signalk-ws"]?(this.debug("Connection falling back to: v1"),""+this.server.endpoints.v1["signalk-ws"]):null},t.prototype.resolveHttpEndpoint=function(){var t;if(this.server.endpoints[this._version])t=this.server.endpoints[this._version]["signalk-http"]?""+this.server.endpoints[this._version]["signalk-http"]:""+this.server.endpoints.v1["signalk-http"];else{this.debug("No current connection http endpoint service! Use connect() to establish a connection.")}return t},t.prototype.disconnectedFromServer=function(){this.server.endpoints={},this.server.info={},this.server.apiVersions=[]},t.prototype.get=function(t){t&&t.length>0&&"/"==t[0]&&(t=t.slice(1));var e=this.protocol+"://"+this.hostname+":"+this.port+"/"+s.dotToSlash(t);if(this.debug("get "+e),this._token){var i=new n.HttpHeaders({Authorization:"JWT "+this._token});return this.http.get(e,{headers:i})}return this.http.get(e)},t.prototype.put=function(t,e){var i=this.protocol+"://"+this.hostname+":"+this.port+"/"+s.dotToSlash(t);if(this.debug("put "+i),this._token){var o=new n.HttpHeaders({Authorization:"JWT "+this._token});return this.http.put(i,e,{headers:o})}return this.http.put(i,e)},t.prototype.post=function(t,e){t&&t.length>0&&"/"==t[0]&&(t=t.slice(1));var i=this.protocol+"://"+this.hostname+":"+this.port+"/"+s.dotToSlash(t);if(this.debug("post "+i),this._token){var o=new n.HttpHeaders({Authorization:"JWT "+this._token});return this.http.post(i,e,{headers:o})}return this.http.post(i,e)},t.prototype.login=function(t,e){var i=(new n.HttpHeaders).set("Content-Type","application/json");return this.http.post(this.protocol+"://"+this.hostname+":"+this.port+"/signalk/"+this._version+"/auth/login",{username:t,password:e},{headers:i})},t.prototype.logout=function(){var t=new i.Subject,e=this.protocol+"://"+this.hostname+":"+this.port+"/signalk/"+this._version+"/auth/logout";if(this._token){var o=new n.HttpHeaders({Authorization:"JWT "+this._token});this.http.put(e,null,{headers:o,responseType:"text"}).subscribe((function(){t.next(!0)}),(function(){t.next(!1)}))}else this.http.put(e,null,{responseType:"text"}).subscribe((function(){t.next(!0)}),(function(){t.next(!1)}));return t.asObservable()},t.prototype.isLoggedIn=function(){var t=new i.Subject;return this.getLoginStatus().subscribe((function(e){t.next("loggedIn"==e.status)}),(function(){t.next(!1)})),t.asObservable()},t.prototype.getLoginStatus=function(){return this.get("/loginstatus")},t.prototype.snapshot=function(t,e){if(e){e=e.slice(0,e.indexOf("."))+"Z";var i=this.resolveHttpEndpoint();if(i){if(i=""+i.replace("api","snapshot")+s.contextToPath(t)+"?time="+e,this._token){var o=new n.HttpHeaders({Authorization:"JWT "+this._token});return this.http.get(i,{headers:o})}return this.http.get(i)}}},t.prototype.resolveAppDataEndpoint=function(t,e){return t&&e?""+this.resolveHttpEndpoint().replace("api","applicationData")+t+"/"+e+"/":null},t.prototype.setAppId=function(t){this._appId=t},t.prototype.setAppVersion=function(t){this._appVersion=t},t.prototype.appDataVersions=function(t,e){void 0===t&&(t=d.USER),void 0===e&&(e=this._appId);var i=this.resolveAppDataEndpoint(t,e);if(this._token){var o=new n.HttpHeaders({Authorization:"JWT "+this._token});return this.http.get(i,{headers:o})}return this.http.get(i)},t.prototype.appDataKeys=function(t,e,i,o){void 0===t&&(t=""),void 0===e&&(e=d.USER),void 0===i&&(i=this._appId),void 0===o&&(o=this._appVersion),t=0!=t.length&&"/"==t[0]?t.slice(1):t;var s=this.resolveAppDataEndpoint(e,i);if(s+=o+"/"+t+"?keys=true",this._token){var r=new n.HttpHeaders({Authorization:"JWT "+this._token});return this.http.get(s,{headers:r})}return this.http.get(s)},t.prototype.appDataGet=function(t,e,i,o){void 0===t&&(t=""),void 0===e&&(e=d.USER),void 0===i&&(i=this._appId),void 0===o&&(o=this._appVersion),t=0!=t.length&&"/"==t[0]?t.slice(1):t;var s=this.resolveAppDataEndpoint(e,i);if(s+=o+"/"+t,this._token){var r=new n.HttpHeaders({Authorization:"JWT "+this._token});return this.http.get(s,{headers:r})}return this.http.get(s)},t.prototype.appDataSet=function(t,e,i,o,r){if(void 0===i&&(i=d.USER),void 0===o&&(o=this._appId),void 0===r&&(r=this._appVersion),t){"/"==t[0]&&(t=t.slice(1));var a=this.resolveAppDataEndpoint(i,o);if(a){var p=""+a+r+"/"+s.dotToSlash(t);if(this._token){var h=new n.HttpHeaders({Authorization:"JWT "+this._token});return this.http.post(p,e,{headers:h})}return this.http.post(p,e)}}},t.prototype.appDataPatch=function(t,e,i,o){void 0===e&&(e=d.USER),void 0===i&&(i=this._appId),void 0===o&&(o=this._appVersion);var s=this.resolveAppDataEndpoint(e,i);if(s&&o){var r=""+s+o;if(this._token){var a=new n.HttpHeaders({Authorization:"JWT "+this._token});return this.http.post(r,t,{headers:a})}return this.http.post(r,t)}},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:n.HttpClient},{type:c},{type:u},{type:l}]},t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t(e.ɵɵinject(n.HttpClient),e.ɵɵinject(c),e.ɵɵinject(u),e.ɵɵinject(l))},token:t,providedIn:"root"}),t}();var v=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[n.HttpClientModule],declarations:[],exports:[],entryComponents:[],providers:[]}]}],t}();t.APPDATA_CONTEXT=d,t.Alarm=a,t.AlarmMethod=h,t.AlarmState=p,t.AlarmType={mob:"notifications.mob",fire:"notifications.fire",sinking:"notifications.sinking",flooding:"notifications.flooding",collision:"notifications.collision",grounding:"notifications.grounding",listing:"notifications.listing",adrift:"notifications.adrift",piracy:"notifications.piracy",abandon:"notifications.abandon"},t.Message=r,t.Path=s,t.SignalKApps=c,t.SignalKClient=f,t.SignalKClientModule=v,t.SignalKHttp=u,t.SignalKStream=l,t.ɵa=o,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=signalk-client-angular.umd.min.js.map